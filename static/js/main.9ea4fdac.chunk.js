(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[1],{138:function(e,t,n){e.exports=n(230)},143:function(e,t,n){},144:function(e,t,n){},149:function(e,t,n){},15:function(e,t,n){"use strict";var a,r;n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(a||(a={})),function(e){e[e.CodeCaptcha=10]="CodeCaptcha"}(r||(r={}))},150:function(e,t,n){},151:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),s=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(143);var u=n(33),i=n(34),o=n(37),l=n(35),f=n(38),d=(n(144),n(84)),m=n.n(d),p=n(8),g=n.n(p),h=n(13),E=function(){return r.a.createElement("nav",{className:g.a.nav},r.a.createElement("ul",null,r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/profile",activeClassName:g.a.active},"Profile")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/dialogs",activeClassName:g.a.active},"Messages")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/users",activeClassName:g.a.active},"Users")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/news",activeClassName:g.a.active},"News")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/music",activeClassName:g.a.active},"Music")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/settings",activeClassName:g.a.active},"Settings"))))},v=n(23),b=n(46),_=n.n(b),O=n(58),S=n.n(O),w=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:S.a.personItem},r.a.createElement("img",{src:e.imgUrl,alt:"img"}),r.a.createElement("p",{className:S.a.name},e.name)))},y=function(e){var t=e.state.friends.map((function(e){return r.a.createElement(w,{imgUrl:e.imgUrl,name:e.name,key:e.id})}));return r.a.createElement("div",null,r.a.createElement("div",{className:_.a.friends},r.a.createElement("h3",{className:_.a.h3},"Friends"),r.a.createElement("div",{className:_.a.persons},t)))},C=Object(v.b)((function(e){return{state:e.sidebar}}),(function(e){return{}}))(y),T=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:m.a.navBar},r.a.createElement(E,null),r.a.createElement(C,null)))},U=n(22),j=(n(149),function(e){return r.a.createElement("div",null,"News")}),N=(n(150),function(e){return r.a.createElement("div",null,"Music")}),P=(n(151),function(e){return r.a.createElement("div",null,"Settings")}),x=n(47),I=n.n(x),k=function(e){return r.a.createElement("header",{className:I.a.header},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/145/145808.svg"}),r.a.createElement("div",{className:I.a.loginBlock},e.isAuth?r.a.createElement("div",null,r.a.createElement("div",{className:I.a.loginName},e.login),r.a.createElement("button",{onClick:e.logout},"Log out")):r.a.createElement(h.b,{to:"/login"},"Login")))},A=n(26),L=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(k,this.props)}}]),t}(r.a.Component),D=Object(v.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,id:e.auth.id}}),{logout:A.d})(L),F=n(5),R={initializing:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(F.a)({},e,{initializing:!0});default:return e}},z=n(18),M=n(52),H=n(76),W=n(61),B={friends:[{id:1,name:"Pavel",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:2,name:"Alesya",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:3,name:"Natalia",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:4,name:"Nikolay",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:5,name:"Rocky",imgUrl:"https://funpick.ru/wp-content/uploads/2017/10/Malenkie-8.jpg"}]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;return t.type,e},J=n(77),V=n(89),Q=n(83),X=Object(z.c)({profilePage:W.b,messagesPage:H.b,sidebar:K,usersPage:J.a,auth:A.a,form:Q.a,app:G}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,Z=Object(z.e)(X,Y(Object(z.a)(V.a)));window.__store__=Z;var $=Z,q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,309))})),ee=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,310))})),te=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,311))})),ne=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,312))})),ae=function(e){function t(){return Object(u.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initializing?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(D,null),r.a.createElement(T,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(a.Suspense,{fallback:r.a.createElement(M.a,null)},r.a.createElement(U.d,null,r.a.createElement(U.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(U.b,{path:"/dialogs",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(U.b,{path:"/users",render:function(){return r.a.createElement(te,{title:"Samuraj"})}}),r.a.createElement(U.b,{path:"/login",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(U.b,{path:"/news",component:j}),r.a.createElement(U.b,{path:"/music",component:N}),r.a.createElement(U.b,{path:"/settings",component:P}),r.a.createElement(U.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(U.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}}))))):r.a.createElement(M.a,null)}}]),t}(r.a.Component),re=Object(z.d)(U.g,Object(v.b)((function(e){return{initializing:e.app.initializing}}),{initializeApp:function(){return function(e){var t=e(Object(A.b)());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(ae),ce=function(){return r.a.createElement(h.a,null,r.a.createElement(v.a,{store:$},r.a.createElement(re,null)))};s.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return m}));var a=n(3),r=n.n(a),c=n(5),s=n(6),u=n(28),i=n(15),o={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},l=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},f=function(){return function(e){var t,n,a,c,u;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(s.a.me());case 2:(t=o.sent).resultCode===i.b.Success&&(n=t.data,a=n.id,c=n.email,u=n.login,e(l(a,c,u,!0)));case 4:case"end":return o.stop()}}))}},d=function(e,t,n,a){return function(c){var o,l;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.a.awrap(s.a.login(e,t,n,a));case 2:(o=d.sent).resultCode===i.b.Success?c(f()):(o.resultCode===i.a.CodeCaptcha&&c(p()),l=o.messages.length>0?o.messages[0]:"Some Error",c(Object(u.a)("login",{_error:l})));case 4:case"end":return d.stop()}}))}},m=function(){return function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(s.a.logout());case 2:t.sent.resultCode===i.b.Success&&e(l(null,null,null,!1));case 4:case"end":return t.stop()}}))}},p=function(){return function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(s.c.getCaptchaUrl());case 2:t=n.sent,e({type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:t.data.url}});case 4:case"end":return n.stop()}}))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(c.a)({},e,{},t.payload);default:return e}}},46:function(e,t,n){e.exports={friends:"Friends_friends__blUdg",h3:"Friends_h3__30okM",persons:"Friends_persons__2BJ9M"}},47:function(e,t,n){e.exports={header:"Header_header__2Qe-h",loginBlock:"Header_loginBlock__2zKG1",loginName:"Header_loginName__1oyWB"}},52:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(88),s=n.n(c);t.a=function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:s.a}))}},58:function(e,t,n){e.exports={personItem:"Person_personItem__2Y2Uy",name:"Person_name__H-v8W"}},6:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return i}));var a=n(87),r=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"da5781ad-702b-4622-a264-735f8ee37ce3"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users/?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},deleteFollowUsers:function(e){return r.delete("follow/"+e).then((function(e){return e.data}))},postFollowUsers:function(e){return r.post("follow/"+e).then((function(e){return e.data}))},getUserProfile:function(e){return console.warn("Obsolete method. Please use profileAPI"),s.getUserProfile(e)}},s={getUserProfile:function(e){return r.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return r.put("profile/status",{status:e}).then((function(e){return e.data}))},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.post("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfileData:function(e){return r.put("profile",e).then((function(e){return e.data}))}},u={me:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},logout:function(){return r.delete("/auth/login").then((function(e){return e.data}))}},i={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},61:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return v}));var a=n(3),r=n.n(a),c=n(27),s=n(5),u=n(6),i=n(28),o=n(15),l={posts:[{id:1,message:"It's my first post",likeCount:14},{id:2,message:"Hi, how are you?",likeCount:11},{id:3,message:"How hey hi",likeCount:12}],profile:null,status:"",newPostText:""},f=function(e){return{type:"ADD-POST",newPostText:e}},d=function(e){return{type:"SET_PROFILE_DATA",data:e}},m=function(e){return{type:"SET_STATUS",status:e}},p=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u.d.getUserProfile(e));case 2:n=a.sent,t(d(n));case 4:case"end":return a.stop()}}))}},g=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u.b.getStatus(e));case 2:n=a.sent,t(m(n));case 4:case"end":return a.stop()}}))}},h=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(u.b.updateStatus(e));case 2:n.sent.resultCode===o.b.Success&&t(m(e));case 4:case"end":return n.stop()}}))}},E=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u.b.savePhoto(e));case 2:(n=a.sent).resultCode===o.b.Success&&t({type:"SAVE_PHOTO_SUCCESS",photos:n.data.photos});case 4:case"end":return a.stop()}}))}},v=function(e){return function(t,n){var a,c;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=n.auth.userId,s.next=3,r.a.awrap(u.b.saveProfileData(e));case 3:if(0!==(c=s.sent).resultCode){s.next=8;break}t(p(a)),s.next=11;break;case 8:return t(Object(i.a)("profile-data",{_error:c.messages[0]})),s.abrupt("return",Promise.reject(c.messages[0]));case 11:case"end":return s.stop()}}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:4,message:t.newPostText,likeCount:11};return Object(s.a)({},e,{posts:[].concat(Object(c.a)(e.posts),[n])});case"SET_STATUS":return Object(s.a)({},e,{status:t.status});case"SET_PROFILE_DATA":return Object(s.a)({},e,{profile:t.data});case"SAVE_PHOTO_SUCCESS":return Object(s.a)({},e,{profile:Object(s.a)({},e.profile,{photos:t.photos})});default:return e}}},76:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(27),r=n(5),c={dialogs:[{id:1,name:"Pavel"},{id:2,name:"Alesya"},{id:3,name:"Guram"},{id:4,name:"Roman"}],messages:[{id:1,message:"Hello!"},{id:2,message:"Dratuti!"},{id:3,message:"Poka"}]},s=function(e){return{type:"ADD-MESSAGE",newMessageText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var n={id:4,message:t.newMessageText};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}}},77:function(e,t,n){"use strict";n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return v}));var a=n(3),r=n.n(a),c=n(27),s=n(5),u=n(6),i=n(15),o={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,portionSize:20,followInProgress:[]},l=function(e){return{type:"FOLLOW",userId:e}},f=function(e){return{type:"UNFOLLOW",userId:e}},d=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},m=function(e){return{type:"TOGGLE_IS_FETCHING",booleanKey:e}},p=function(e,t){return{type:"TOGGLE_IS_FOLLOW_IN_PROGRESS",booleanKey:e,userId:t}},g=function(e,t){return function(n,a){var c;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n(m(!0)),n(d(e)),a.next=4,r.a.awrap(u.d.getUsers(e,t));case 4:c=a.sent,n({type:"SET_USERS",users:c.items}),n({type:"SET_TOTAL_USERS_COUNT",usersCount:c.totalCount}),n(m(!1));case 8:case"end":return a.stop()}}))}},h=function(e,t,n,a){return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e(p(!0,t)),c.next=3,r.a.awrap(n(t));case 3:c.sent.resultCode==i.b.Success&&e(a(t)),e(p(!1,t));case 6:case"end":return c.stop()}}))},E=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(h(t,e,u.d.postFollowUsers.bind(u.d),l));case 2:case"end":return n.stop()}}))}},v=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(h(t,e,u.d.deleteFollowUsers.bind(u.d),f));case 2:case"end":return n.stop()}}))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(s.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(s.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(s.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(s.a)({},e,{followed:!1}):e}))});case"SET_USERS":return Object(s.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(s.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(s.a)({},e,{totalUsersCount:t.usersCount});case"TOGGLE_IS_FETCHING":return Object(s.a)({},e,{isFetching:t.booleanKey});case"TOGGLE_IS_FOLLOW_IN_PROGRESS":return Object(s.a)({},e,{followInProgress:t.booleanKey?[].concat(Object(c.a)(e.followInProgress),[t.userId]):e.followInProgress.filter((function(e){return e!=t.userId}))});default:return e}}},8:function(e,t,n){e.exports={nav:"Navigation_nav__1QyU7",active:"Navigation_active__3kEM0"}},84:function(e,t,n){e.exports={navBar:"Navbar_navBar__lPWyD"}},88:function(e,t,n){e.exports=n.p+"static/media/preloader.b303b419.svg"}},[[138,2,3]]]);
//# sourceMappingURL=main.9ea4fdac.chunk.js.map