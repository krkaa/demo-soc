(this.webpackJsonpsocial=this.webpackJsonpsocial||[]).push([[1],{137:function(e,t,n){e.exports=n(229)},142:function(e,t,n){},143:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(44),c=n.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(142);var i=n(32),u=n(33),o=n(36),l=n(34),d=n(37),f=(n(143),n(83)),m=n.n(f),p=n(8),g=n.n(p),h=n(13),v=function(){return r.a.createElement("nav",{className:g.a.nav},r.a.createElement("ul",null,r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/profile",activeClassName:g.a.active},"Profile")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/dialogs",activeClassName:g.a.active},"Messages")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/users",activeClassName:g.a.active},"Users")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/news",activeClassName:g.a.active},"News")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/music",activeClassName:g.a.active},"Music")),r.a.createElement("li",{className:g.a.item},r.a.createElement(h.b,{to:"/settings",activeClassName:g.a.active},"Settings"))))},E=n(22),b=n(45),_=n.n(b),O=n(57),w=n.n(O),S=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:w.a.personItem},r.a.createElement("img",{src:e.imgUrl}),r.a.createElement("p",{className:w.a.name},e.name)))},y=function(e){var t=e.state.friends.map((function(e){return r.a.createElement(S,{imgUrl:e.imgUrl,name:e.name,key:e.id})}));return r.a.createElement("div",null,r.a.createElement("div",{className:_.a.friends},r.a.createElement("h3",{className:_.a.h3},"Friends"),r.a.createElement("div",{className:_.a.persons},t)))},C=Object(E.b)((function(e){return{state:e.sidebar}}),(function(e){return{}}))(y),j=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:m.a.navBar},r.a.createElement(v,null),r.a.createElement(C,null)))},U=n(21),T=(n(148),function(e){return r.a.createElement("div",null,"News")}),P=(n(149),function(e){return r.a.createElement("div",null,"Music")}),N=(n(150),function(e){return r.a.createElement("div",null,"Settings")}),I=n(46),k=n.n(I),x=function(e){return r.a.createElement("header",{className:k.a.header},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/145/145808.svg"}),r.a.createElement("div",{className:k.a.loginBlock},e.isAuth?r.a.createElement("div",null,r.a.createElement("div",{className:k.a.loginName},e.login),r.a.createElement("button",{onClick:e.logout},"Log out")):r.a.createElement(h.b,{to:"/login"},"Login")))},A=n(25),L=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(x,this.props)}}]),t}(r.a.Component),D=Object(E.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,id:e.auth.id}}),{logout:A.d})(L),R=n(5),F={initializing:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(R.a)({},e,{initializing:!0});default:return e}},z=n(17),M=n(51),H=n(75),W=n(60),B={friends:[{id:1,name:"Pavel",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:2,name:"Alesya",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:3,name:"Natalia",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:4,name:"Nikolay",imgUrl:"https://avatarko.ru/img/kartinka/17/lisa_16103.jpg"},{id:5,name:"Rocky",imgUrl:"https://funpick.ru/wp-content/uploads/2017/10/Malenkie-8.jpg"}]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;return t.type,e},J=n(82),V=n(88),Q=n(81),X=Object(z.c)({profilePage:W.b,messagesPage:H.b,sidebar:K,usersPage:J.a,auth:A.a,form:Q.a,app:G}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,Z=Object(z.e)(X,Y(Object(z.a)(V.a)));window.__store__=Z;var $=Z,q=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,308))})),ee=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,309))})),te=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,310))})),ne=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,311))})),ae=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initializing?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(D,null),r.a.createElement(j,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(a.Suspense,{fallback:r.a.createElement(M.a,null)},r.a.createElement(U.d,null,r.a.createElement(U.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(U.b,{path:"/dialogs",render:function(){return r.a.createElement(ee,null)}}),r.a.createElement(U.b,{path:"/users",render:function(){return r.a.createElement(te,null)}}),r.a.createElement(U.b,{path:"/login",render:function(){return r.a.createElement(ne,null)}}),r.a.createElement(U.b,{path:"/news",component:T}),r.a.createElement(U.b,{path:"/music",component:P}),r.a.createElement(U.b,{path:"/settings",component:N}))))):r.a.createElement(M.a,null)}}]),t}(r.a.Component),re=Object(z.d)(U.g,Object(E.b)((function(e){return{initializing:e.app.initializing}}),{initializeApp:function(){return function(e){var t=e(Object(A.b)());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(ae),se=function(e){return r.a.createElement(h.a,null,r.a.createElement(E.a,{store:$},r.a.createElement(re,null)))};c.a.render(r.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f}));var a=n(3),r=n.n(a),s=n(5),c=n(6),i=n(27),u={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},o=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:a}}},l=function(){return function(e){var t,n,a,s,i;return r.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,r.a.awrap(c.a.me());case 2:0===(t=u.sent).resultCode&&(n=t.data,a=n.id,s=n.email,i=n.login,e(o(a,s,i,!0)));case 4:case"end":return u.stop()}}))}},d=function(e,t,n,a){return function(s){var u,o;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.a.awrap(c.a.login(e,t,n,a));case 2:0===(u=d.sent).data.resultCode?s(l()):(10===u.data.resultCode&&s(m()),o=u.data.messages.length>0?u.data.messages[0]:"Some Error",s(Object(i.a)("login",{_error:o})));case 4:case"end":return d.stop()}}))}},f=function(){return function(e){return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.awrap(c.a.logout());case 2:0===t.sent.data.resultCode&&e(o(null,null,null,!1));case 4:case"end":return t.stop()}}))}},m=function(){return function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(c.c.getCaptchaUrl());case 2:t=n.sent,e({type:"GET_CAPTCHA_URL_SUCCESS",payload:{captchaUrl:t.data.url}});case 4:case"end":return n.stop()}}))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"GET_CAPTCHA_URL_SUCCESS":return Object(s.a)({},e,{},t.payload);default:return e}}},45:function(e,t,n){e.exports={friends:"Friends_friends__blUdg",h3:"Friends_h3__30okM",persons:"Friends_persons__2BJ9M"}},46:function(e,t,n){e.exports={header:"Header_header__2Qe-h",loginBlock:"Header_loginBlock__2zKG1",loginName:"Header_loginName__1oyWB"}},51:function(e,t,n){"use strict";var a=n(0),r=n.n(a),s=n(87),c=n.n(s);t.a=function(e){return r.a.createElement("div",null,r.a.createElement("img",{src:c.a}))}},57:function(e,t,n){e.exports={personItem:"Person_personItem__2Y2Uy",name:"Person_name__H-v8W"}},6:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return u}));var a=n(86),r=a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"da5781ad-702b-4622-a264-735f8ee37ce3"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return r.get("users/?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},deleteFollowUsers:function(e){return r.delete("follow/"+e).then((function(e){return e.data}))},postFollowUsers:function(e){return r.post("follow/"+e).then((function(e){return e.data}))},getUserProfile:function(e){return console.warn("Obsolete method. Please use profileAPI"),c.getUserProfile(e)}},c={getUserProfile:function(e){return r.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return r.get("profile/status/"+e)},updateStatus:function(e){return r.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.post("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfileData:function(e){return r.put("profile",e)}},i={me:function(){return r.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return r.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:a})},logout:function(){return r.delete("/auth/login")}},u={getCaptchaUrl:function(){return r.get("security/get-captcha-url")}}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return v}));var a=n(3),r=n.n(a),s=n(26),c=n(5),i=n(6),u=n(27),o={posts:[{id:1,message:"It's my first post",likeCount:"14"},{id:2,message:"Hi, how are you?",likeCount:"11"},{id:3,message:"How hey hi",likeCount:"12"}],profile:null,status:""},l=function(e){return{type:"ADD-POST",newPostText:e}},d=function(e){return{type:"SET_PROFILE_DATA",data:e}},f=function(e){return{type:"SET_STATUS",status:e}},m=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.d.getUserProfile(e));case 2:n=a.sent,t(d(n));case 4:case"end":return a.stop()}}))}},p=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.getStatus(e));case 2:n=a.sent,t(f(n.data));case 4:case"end":return a.stop()}}))}},g=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(i.b.updateStatus(e));case 2:0===n.sent.data.resultCode&&t(f(e));case 4:case"end":return n.stop()}}))}},h=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(i.b.savePhoto(e));case 2:0===(n=a.sent).data.resultCode&&t({type:"SAVE_PHOTO_SUCCESS",photos:n.data.data.photos});case 4:case"end":return a.stop()}}))}},v=function(e){return function(t,n){var a,s;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=n().auth.userId,c.next=3,r.a.awrap(i.b.saveProfileData(e));case 3:if(0!==(s=c.sent).data.resultCode){c.next=8;break}t(m(a)),c.next=11;break;case 8:return t(Object(u.a)("profile-data",{_error:s.data.messages[0]})),c.abrupt("return",Promise.reject(s.data.messages[0]));case 11:case"end":return c.stop()}}))}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;Object(c.a)({},e);switch(t.type){case"ADD-POST":var n={id:4,message:t.newPostText,likeCount:"11"};return Object(c.a)({},e,{posts:[].concat(Object(s.a)(e.posts),[n])});case"SET_STATUS":return Object(c.a)({},e,{status:t.status});case"SET_PROFILE_DATA":return Object(c.a)({},e,{profile:t.data});case"SAVE_PHOTO_SUCCESS":return Object(c.a)({},e,{profile:Object(c.a)({},e.profile,{photos:t.photos})});default:return e}}},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(26),r=n(5),s={dialogs:[{id:1,name:"Pavel"},{id:2,name:"Alesya"},{id:3,name:"Guram"},{id:4,name:"Roman"}],messages:[{id:1,message:"Hello!"},{id:2,message:"Dratuti!"},{id:3,message:"Poka"}]},c=function(e){return{type:"ADD-MESSAGE",newMessageText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-MESSAGE":var n={id:4,message:t.newMessageText};return Object(r.a)({},e,{messages:[].concat(Object(a.a)(e.messages),[n])});default:return e}}},8:function(e,t,n){e.exports={nav:"Navigation_nav__1QyU7",active:"Navigation_active__3kEM0"}},82:function(e,t,n){"use strict";var a=n(3),r=n.n(a),s=n(26),c=n(5),i=n(6);n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return v}));var u={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,portionSize:20,followInProgress:[]},o=function(e){return{type:"FOLLOW",userId:e}},l=function(e){return{type:"UNFOLLOW",userId:e}},d=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},f=function(e){return{type:"TOGGLE_IS_FETCHING",booleanKey:e}},m=function(e,t){return{type:"TOGGLE_IS_FOLLOW_IN_PROGRESS",booleanKey:e,userId:t}},p=function(e,t){return function(n){var a;return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n(f(!0)),n(d(e)),s.next=4,r.a.awrap(i.d.getUsers(e,t));case 4:a=s.sent,n({type:"SET_USERS",users:a.items}),n({type:"SET_TOTAL_USERS_COUNT",usersCount:a.totalCount}),n(f(!1));case 8:case"end":return s.stop()}}))}},g=function(e,t,n,a){return r.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e(m(!0,t)),s.next=3,r.a.awrap(n(t));case 3:0==s.sent.resultCode&&e(a(t)),e(m(!1,t));case 6:case"end":return s.stop()}}))},h=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(g(t,e,i.d.postFollowUsers.bind(i.d),o));case 2:case"end":return n.stop()}}))}},v=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(g(t,e,i.d.deleteFollowUsers.bind(i.d),l));case 2:case"end":return n.stop()}}))}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)({},e,{followed:!0}):e}))});case"UNFOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)({},e,{followed:!1}):e}))});case"SET_USERS":return Object(c.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(c.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(c.a)({},e,{totalUsersCount:t.usersCount});case"TOGGLE_IS_FETCHING":return Object(c.a)({},e,{isFetching:t.booleanKey});case"TOGGLE_IS_FOLLOW_IN_PROGRESS":return Object(c.a)({},e,{followInProgress:t.booleanKey?[].concat(Object(s.a)(e.followInProgress),[t.userId]):e.followInProgress.filter((function(e){return e!=t.userId}))});default:return e}}},83:function(e,t,n){e.exports={navBar:"Navbar_navBar__lPWyD"}},87:function(e,t,n){e.exports=n.p+"static/media/preloader.b303b419.svg"}},[[137,2,3]]]);
//# sourceMappingURL=main.cfe79740.chunk.js.map